<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Radiant Reach - Mobile Friendly</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
        }

        #logo {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 80px;
            z-index: 10;
        }

        #voice-search-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(45deg, #ff416c, #ff4b2b);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 30px;
            cursor: pointer;
            z-index: 10;
            font-size: 14px;
        }

        #particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .cube-label {
            position: absolute;
            color: white;
            font-weight: bold;
            text-shadow: 0 0 5px black;
            pointer-events: none;
            font-size: 1rem;
        }

        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }

        #info-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        #info-modal h2 {
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        #info-modal p {
            font-size: 1rem;
            padding: 0 20px;
            text-align: center;
        }

        #info-modal .close-btn {
            margin-top: 20px;
            padding: 10px 20px;
            border: none;
            background: #ff416c;
            border-radius: 20px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            #voice-search-btn {
                padding: 8px 15px;
                font-size: 12px;
            }

            .cube-label {
                font-size: 0.8rem;
            }

            #info-modal h2 {
                font-size: 1.2rem;
            }

            #info-modal p {
                font-size: 0.9rem;
            }

            #info-modal .close-btn {
                font-size: 0.8rem;
                padding: 8px 15px;
            }
        }
    </style>
</head>
<body>
    <img id="logo" src="logo.png" alt="Logo">
    <button id="voice-search-btn" onclick="startVoiceSearch()">ðŸ”Š Pesquisar</button>
    <div id="particles"></div>
    <div id="info-modal">
        <h2 id="modal-title"></h2>
        <p id="modal-description"></p>
        <button class="close-btn" onclick="closeModal()">Fechar</button>
    </div>
    <script>
        let scene, camera, renderer, objects = [];
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = "pt-PT";

        function init() {
            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            const light = new THREE.PointLight(0xffffff, 1.5);
            light.position.set(10, 10, 10);
            scene.add(light);

            createCubes();
            createParticles();
            animate();

            window.addEventListener('resize', onResize);
            document.addEventListener('pointerdown', onCubeClick);
        }

        function createCubes() {
            const geometry = new THREE.BoxGeometry(1, 1, 1);
            const materials = [
                new THREE.MeshStandardMaterial({ color: 0xe74c3c }),
                new THREE.MeshStandardMaterial({ color: 0x3498db }),
                new THREE.MeshStandardMaterial({ color: 0x1abc9c })
            ];
            const positions = [-2, 0, 2];
            const names = ['quem-somos', 'servicos', 'contactos'];

            for (let i = 0; i < 3; i++) {
                const cube = new THREE.Mesh(geometry, materials[i]);
                cube.position.x = positions[i];
                cube.name = names[i];
                objects.push(cube);
                scene.add(cube);
            }
        }

        function createParticles() {
            particlesJS("particles", {
                particles: {
                    number: { value: 100 },
                    color: { value: "#ffffff" },
                    shape: { type: "circle" },
                    opacity: { value: 0.5 },
                    size: { value: 3 },
                    line_linked: { enable: true, distance: 150, color: "#ffffff", opacity: 0.4 },
                    move: { enable: true, speed: 2 }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: { enable: true, mode: "repulse" },
                        onclick: { enable: true, mode: "push" },
                        resize: true
                    }
                },
                retina_detect: true
            });
        }

        function animate() {
            requestAnimationFrame(animate);
            objects.forEach(cube => {
                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;
            });
            renderer.render(scene, camera);
        }

        function onCubeClick(event) {
            const mouse = new THREE.Vector2(
                (event.clientX / window.innerWidth) * 2 - 1,
                -(event.clientY / window.innerHeight) * 2 + 1
            );
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(objects);
            if (intersects.length > 0) showInfo(intersects[0].object.name);
        }

        function showInfo(name) {
            const modal = document.getElementById('info-modal');
            const title = document.getElementById('modal-title');
            const description = document.getElementById('modal-description');
            modal.style.display = 'flex';
            if (name === 'quem-somos') title.innerText = 'Quem Somos';
            else if (name === 'servicos') title.innerText = 'ServiÃ§os';
            else if (name === 'contactos') title.innerText = 'Contactos';
            description.innerText = `InformaÃ§Ãµes sobre ${name.replace('-', ' ')}.`;
        }

        function closeModal() {
            document.getElementById('info-modal').style.display = 'none';
        }

        function onResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function startVoiceSearch() {
            recognition.start();
            recognition.onresult = event => {
                const transcript = event.results[0][0].transcript.toLowerCase();
                if (transcript.includes('quem somos')) showInfo('quem-somos');
                else if (transcript.includes('serviÃ§os')) showInfo('servicos');
                else if (transcript.includes('contactos')) showInfo('contactos');
            };
        }

        init();
    </script>
</body>
</html>
